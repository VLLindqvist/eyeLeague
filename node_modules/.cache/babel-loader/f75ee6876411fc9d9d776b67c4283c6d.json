{"ast":null,"code":"import _defineProperty from \"C:\\\\Users\\\\victo\\\\Desktop\\\\VLQ.se\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"C:\\\\Users\\\\victo\\\\Desktop\\\\VLQ.se\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"C:\\\\Users\\\\victo\\\\Desktop\\\\VLQ.se\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\victo\\\\Desktop\\\\VLQ.se\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\victo\\\\Desktop\\\\VLQ.se\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\victo\\\\Desktop\\\\VLQ.se\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\victo\\\\Desktop\\\\VLQ.se\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\victo\\\\Desktop\\\\VLQ.se\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"C:\\\\Users\\\\victo\\\\Desktop\\\\VLQ.se\\\\src\\\\components\\\\SettingsSerie.js\";\nimport React, { Component } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport { Modal } from 'react-bootstrap';\nimport settings from \"../settings.json\";\nimport '../css/test.scss';\nimport deleteIcon from \"../bilder/delete.svg\";\n\nvar Settings =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Settings, _Component);\n\n  function Settings(props) {\n    var _this;\n\n    _classCallCheck(this, Settings);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Settings).call(this, props));\n    _this.state = {\n      data: props.data,\n      loading: false,\n      changes: null,\n      remove: false,\n      msg: false,\n      txt: '',\n      ok: '',\n      redirect: false\n    };\n    _this.submit = _this.submit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.changes = _this.changes.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.remove = _this.remove.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.show = _this.show.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.close = _this.close.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(Settings, [{\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(input) {\n      console.log(\"update\");\n      this.setState({\n        data: input.data\n      });\n    }\n  }, {\n    key: \"submit\",\n    value: function submit(e) {\n      var _this2 = this;\n\n      e.preventDefault();\n\n      if (this.state.loading) {\n        return;\n      } else {\n        this.setState({\n          loading: true\n        });\n      }\n\n      if (this.state.changes === null) {\n        this.setState({\n          msg: true,\n          txt: 'Ingen ändring har gjorts',\n          loading: false,\n          ok: ''\n        });\n        return;\n      }\n\n      var check = false;\n      var query = Object.keys(this.state.changes).map(function (item) {\n        if (item !== 'text') {\n          if (_this2.state.changes[item].trim() === \"\") {\n            check = true;\n          }\n        }\n\n        return item + \"=\" + _this2.state.changes[item];\n      }).join(\"&\");\n\n      if (check) {\n        this.setState({\n          msg: true,\n          txt: 'Tomma fält',\n          loading: false,\n          ok: ''\n        });\n        return;\n      }\n\n      fetch(settings.api + \"tournament/?t=\" + this.props.data.id + \"&\" + query, {\n        method: \"PATCH\",\n        credentials: \"include\"\n      }).then(function (response) {\n        if (response.status != '200') {\n          throw response.statusText;\n        }\n\n        return response.json();\n      }).then(function (response) {\n        _this2.setState({\n          loading: false,\n          changes: null,\n          msg: true,\n          txt: \"Ändringar sparade \" + String.fromCharCode(10004),\n          ok: 'ok'\n        });\n\n        if (response.status === false) {\n          console.log(\"error my error\");\n          return;\n        }\n\n        _this2.props.trigger();\n      }).catch(function () {\n        _this2.setState({\n          loading: false\n        });\n      });\n    }\n  }, {\n    key: \"changes\",\n    value: function changes(e) {\n      this.setState({\n        changes: _objectSpread({}, this.state.changes, _defineProperty({}, e.target.dataset.id, e.target.value)),\n        msg: false,\n        txt: ''\n      });\n    }\n  }, {\n    key: \"remove\",\n    value: function remove() {\n      var _this3 = this;\n\n      fetch(settings.api + \"serie/?s=\" + this.props.data.id, {\n        method: \"DELETE\",\n        credentials: \"include\"\n      }).then(function (response) {\n        if (response.status != '200') {\n          throw response.statusText;\n        }\n\n        return response.json();\n      }).then(function (response) {\n        _this3.setState({\n          redirect: true\n        });\n      });\n    }\n  }, {\n    key: \"show\",\n    value: function show() {\n      this.setState({\n        remove: true\n      });\n    }\n  }, {\n    key: \"close\",\n    value: function close() {\n      this.setState({\n        remove: false\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      if (this.state.redirect) {\n        return React.createElement(Redirect, {\n          to: settings.url + \"manage/\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 120\n          },\n          __self: this\n        });\n      }\n\n      var submit = React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, \"Spara \\xE4ndringar\", React.createElement(\"input\", {\n        type: \"submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }));\n\n      if (this.state.loading) {\n        submit = React.createElement(\"div\", {\n          className: \"loading\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 125\n          },\n          __self: this\n        });\n      }\n\n      var error = React.createElement(\"div\", {\n        className: \"error-hide\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      });\n\n      if (this.state.msg) {\n        error = React.createElement(\"div\", {\n          className: \"error-show \" + this.state.ok,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 130\n          },\n          __self: this\n        }, this.state.txt);\n      }\n\n      var teams = this.state.data.teams.map(function (item, i) {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 135\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 136\n          },\n          __self: this\n        }, \"Lag \", i + 1), React.createElement(\"input\", {\n          \"data-id\": i,\n          id: \"title\",\n          type: \"text\",\n          defaultValue: item,\n          onChange: _this4.changes,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 137\n          },\n          __self: this\n        }));\n      });\n      return React.createElement(\"div\", {\n        className: \"wrap\",\n        id: \"settings\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, React.createElement(Modal, {\n        show: this.state.remove,\n        onHide: this.close,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }, React.createElement(Modal.Body, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"close\",\n        onClick: this.close,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, \"\\xD7\"), React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, \"\\xC4r du s\\xE4ker p\\xE5 att du vill ta bort serien?\"), React.createElement(\"div\", {\n        className: \"window-btns\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        onClick: this.close,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, \"Avbryt\"), React.createElement(\"div\", {\n        className: \"remove\",\n        onClick: this.remove,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, \"Ta bort\")))), React.createElement(\"div\", {\n        className: \"head\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, \"Inst\\xE4llningar\"), React.createElement(\"div\", {\n        className: \"remove\",\n        onClick: this.show,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        className: \"deleteIcon\",\n        src: deleteIcon,\n        alt: \"svg+xml\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"inputz\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        onSubmit: this.submit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }, \"Serienamn\"), React.createElement(\"input\", {\n        \"data-id\": \"name\",\n        id: \"title\",\n        type: \"text\",\n        defaultValue: this.props.data.name,\n        onChange: this.changes,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }, \"Lagnamn\"), React.createElement(\"div\", {\n        className: \"teams\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }, teams), error, React.createElement(\"div\", {\n        className: \"submit\",\n        onClick: this.submit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }, submit))));\n    }\n  }]);\n\n  return Settings;\n}(Component);\n\nexport default Settings;","map":{"version":3,"sources":["C:\\Users\\victo\\Desktop\\VLQ.se\\src\\components\\SettingsSerie.js"],"names":["React","Component","Redirect","Modal","settings","Settings","props","state","data","loading","changes","remove","msg","txt","ok","redirect","submit","bind","show","close","input","console","log","setState","e","preventDefault","check","query","Object","keys","map","item","trim","join","fetch","api","id","method","credentials","then","response","status","statusText","json","String","fromCharCode","trigger","catch","target","dataset","value","url","error","teams","i","deleteIcon","name"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { Redirect } from 'react-router-dom'\r\nimport { Modal } from 'react-bootstrap';\r\n\r\nimport settings from \"../settings.json\";\r\n\r\nimport '../css/test.scss';\r\n\r\nimport deleteIcon from '../bilder/delete.svg';\r\n\r\nclass Settings extends Component {\r\n    constructor(props){\r\n        super(props);\r\n\r\n        this.state = {\r\n            data: props.data,\r\n            loading: false,\r\n            changes: null,\r\n            remove: false,\r\n            msg: false,\r\n            txt: '',\r\n            ok: '',\r\n            redirect: false\r\n        }\r\n\r\n        this.submit = this.submit.bind(this);\r\n        this.changes = this.changes.bind(this);\r\n        this.remove = this.remove.bind(this);\r\n        this.show = this.show.bind(this);\r\n        this.close = this.close.bind(this);\r\n    }\r\n\r\n    componentWillReceiveProps(input){\r\n        console.log(\"update\");\r\n        this.setState({data: input.data});\r\n    }\r\n\r\n    submit(e){\r\n        e.preventDefault();\r\n        if(this.state.loading){\r\n            return;\r\n        }else {\r\n            this.setState({loading: true});\r\n        }\r\n\r\n        if(this.state.changes === null){\r\n            this.setState({msg: true, txt: 'Ingen ändring har gjorts', loading: false, ok: ''});\r\n            return;\r\n        }\r\n\r\n        let check = false;\r\n        const query = Object.keys(this.state.changes).map((item) => {\r\n            if(item !== 'text'){\r\n                if(this.state.changes[item].trim() === \"\"){\r\n                    check = true;\r\n                }\r\n            }\r\n            return item + \"=\" + this.state.changes[item];\r\n        }).join(\"&\");\r\n\r\n        if(check){\r\n            this.setState({msg: true, txt: 'Tomma fält', loading: false, ok: ''});\r\n            return;\r\n        }\r\n\r\n\t\tfetch((settings.api + \"tournament/?t=\" + this.props.data.id + \"&\" + query), {\r\n            method: \"PATCH\",\r\n            credentials: \"include\",\r\n        })\r\n\t\t.then((response) => {\r\n            if(response.status != '200'){throw response.statusText;}\r\n            return response.json();\r\n        })\r\n\t\t.then(response => {\r\n            this.setState({loading: false, changes: null, msg: true, txt: \"Ändringar sparade \" + String.fromCharCode(10004), ok: 'ok'});\r\n            if(response.status === false){\r\n                console.log(\"error my error\");\r\n                return;\r\n            }\r\n            this.props.trigger();\r\n        })\r\n        .catch(() => {\r\n            this.setState({loading: false});\r\n        });\r\n    }\r\n\r\n    changes(e){\r\n        this.setState({\r\n            changes: {\r\n                ...this.state.changes,\r\n                [e.target.dataset.id]: e.target.value\r\n            },\r\n            msg: false,\r\n            txt: ''\r\n        });\r\n    }\r\n\r\n    remove(){\r\n      fetch((settings.api + \"serie/?s=\" + this.props.data.id), {\r\n          method: \"DELETE\",\r\n          credentials: \"include\",\r\n      }).then((response) => {\r\n          if(response.status != '200'){throw response.statusText;}\r\n          return response.json();\r\n      }).then(response => {\r\n          this.setState({redirect: true});\r\n      });\r\n    }\r\n\r\n    show(){\r\n        this.setState({remove: true});\r\n    }\r\n\r\n    close(){\r\n        this.setState({remove: false});\r\n    }\r\n\r\n    render() {\r\n        if(this.state.redirect){\r\n            return <Redirect to={settings.url + \"manage/\"}></Redirect>;\r\n        }\r\n\r\n        let submit = <div>Spara ändringar<input type=\"submit\"></input></div>;\r\n    \t\tif(this.state.loading){\r\n    \t\t\tsubmit = <div className=\"loading\"></div>;\r\n        }\r\n\r\n        let error = <div className=\"error-hide\"></div>;\r\n    \t\tif(this.state.msg){\r\n    \t\t\terror = <div className={\"error-show \" + this.state.ok}>{this.state.txt}</div>;\r\n        }\r\n\r\n        const teams = this.state.data.teams.map((item, i) => {\r\n          return(\r\n            <div>\r\n              <div>Lag {i + 1}</div>\r\n              <input data-id={i} id=\"title\" type=\"text\" defaultValue={item} onChange={this.changes}></input>\r\n            </div>\r\n          );\r\n        });\r\n\r\n        return(\r\n            <div className=\"wrap\" id=\"settings\">\r\n                <Modal show={this.state.remove} onHide={this.close}>\r\n                   <Modal.Body >\r\n                    <div className=\"close\" onClick={this.close}>&times;</div>\r\n                    <h3>Är du säker på att du vill ta bort serien?</h3>\r\n                     <div className=\"window-btns\">\r\n                       <div onClick={this.close}>Avbryt</div>\r\n                       <div className=\"remove\" onClick={this.remove}>Ta bort</div>\r\n                     </div>\r\n                   </Modal.Body>\r\n               </Modal>\r\n\r\n\r\n                <div className=\"head\">\r\n                  <h2>Inställningar</h2>\r\n                  <div className=\"remove\" onClick={this.show}>\r\n                    <img className=\"deleteIcon\" src={deleteIcon} alt=\"svg+xml\"></img>\r\n                  </div>\r\n                </div>\r\n\r\n\r\n                <div className=\"inputz\">\r\n                    <form onSubmit={this.submit}>\r\n                        <label htmlFor=\"title\">Serienamn</label>\r\n                        <input data-id=\"name\" id=\"title\" type=\"text\" defaultValue={this.props.data.name} onChange={this.changes}></input>\r\n                        {/*}<label htmlFor=\"info\">Information om turnering</label>\r\n                        <textarea data-id=\"text\" id=\"info\" defaultValue={this.props.data.text} onChange={this.changes}></textarea>\r\n                        {*/}\r\n                        <label>Lagnamn</label>\r\n                        <div className=\"teams\">\r\n                            {teams}\r\n                        </div>\r\n\r\n                        {error}\r\n                        <div className=\"submit\" onClick={this.submit}>\r\n                            {submit}\r\n                        </div>\r\n\r\n                    </form>\r\n                </div>\r\n\r\n\r\n\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Settings;\r\n"]},"metadata":{},"sourceType":"module"}